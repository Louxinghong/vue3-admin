import{g as N}from"./index-dbaf1466.js";import{d as V,h as g,l as E,c as _,b as y,F as w,a as r,w as i,N as D,M as I,r as m,o as v,e as c,_ as S}from"./index-cc7e47e7.js";const T={class:"draw-area"},h={class:"action-content"},B=V({__name:"index",setup(L){const u=g(!1),f=g(!1);let t=null,s=null,o=null,a=null,l=null;E(async()=>{s=await N({mapPlugins:["AMap.MouseTool","AMap.PolygonEditor"]}),t=new s.Map("map-container",{center:[116.397428,39.90923]}),new s.LabelsLayer({zooms:[3,20],zIndex:1e3,collision:!1}),o=new s.MouseTool(t),o.on("draw",n=>{l=n.obj,a=new s.PolygonEditor(t,l),a.open(),o.close()})});const A=()=>{u.value=!0,l&&l.setPath([]),o.polygon({strokeStyle:"dashed"}),t.setDefaultCursor("crosshair")},C=()=>{if(a){a.close();let n=a.getTarget().getPath();l.setPath(n),D.success({id:"1",title:"绘制结果",content:`${JSON.stringify(n.map(e=>({lng:e.lng,lat:e.lat})))}`,closable:!0,duration:0}),t.remove(a)}o&&o.close(),u.value=!1},d=g(""),x=()=>{f.value=!0},k=n=>{if(n)if(d.value)l=new s.Polygon({map:t,path:JSON.parse(d.value).map(e=>[e.lng,e.lat]),strokeColor:"#FF7A00",strokeStyle:"dashed",fillColor:"#FF7A00",fillOpacity:.2}),t.setFitView();else{I.warning("请输入区域经纬度");return}f.value=!1},M=()=>{t.setDefaultCursor(""),a&&a.close(),o&&o.close(),l&&l.setPath([]),u.value=!1};return(n,e)=>{const p=m("a-button"),P=m("a-textarea"),b=m("dialog-info");return v(),_("div",T,[e[5]||(e[5]=y("div",{id:"map-container",class:"map-container"},null,-1)),y("div",h,[u.value?(v(),_(w,{key:1},[r(p,{onClick:M},{default:i(()=>e[3]||(e[3]=[c("退出编辑")])),_:1}),r(p,{type:"primary",onClick:C},{default:i(()=>e[4]||(e[4]=[c("保存编辑")])),_:1})],64)):(v(),_(w,{key:0},[r(p,{type:"primary",onClick:A},{default:i(()=>e[1]||(e[1]=[c("绘制区域")])),_:1}),r(p,{type:"primary",onClick:x},{default:i(()=>e[2]||(e[2]=[c("输入区域")])),_:1})],64))]),r(b,{visible:f.value,title:"区域经纬度",onClose:k},{default:i(()=>[r(P,{class:"area-input-list",placeholder:"请输入区域经纬度，例如'[{\\'lng\\':117.392853,\\'lat\\':32.945922},{\\'lng\\':117.390888,\\'lat\\':32.96572},{\\'lng\\':117.373084,\\'lat\\':32.961718}']'",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=F=>d.value=F)},null,8,["modelValue"])]),_:1},8,["visible"])])}}});const J=S(B,[["__scopeId","data-v-969830c4"]]);export{J as default};
