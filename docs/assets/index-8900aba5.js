import{g as F}from"./index-dbaf1466.js";import{d as C,h as x,r as l,o as p,c as y,a,w as t,b as I,F as N,i as A,q as k,v as P,e as f,_ as M,x as $,l as E}from"./index-cc7e47e7.js";const R={class:"batch-point"},q={class:"manual-list"},O=C({__name:"PointInfo",emits:["drawPoint"],setup(z,{emit:s}){const e=x([{lng:"",lat:""}]),d=()=>{e.value.push({lng:"",lat:""})},v=u=>{e.value.splice(u,1)},c=s,o=()=>{c("drawPoint",e.value)},i=()=>{e.value=[{lng:"",lat:""}],c("drawPoint",e.value)},D=()=>{location.href="/vue3-admin/file/batchPoint.xlsx"},U=u=>{c("drawPoint",u.map(n=>({address:n.address,lng:n.coordinate.split(",")[0],lat:n.coordinate.split(",")[1]})))};return(u,n)=>{const g=l("svg-icon"),r=l("a-button"),b=l("a-input"),V=l("a-space"),h=l("a-tab-pane"),B=l("file-upload"),L=l("a-tabs"),S=l("a-popover");return p(),y("div",R,[a(S,{title:"",trigger:"click",position:"bl",style:{width:"360px"}},{content:t(()=>[a(L,{"default-active-key":"1"},{default:t(()=>[a(h,{key:"1",title:"手动输入"},{default:t(()=>[I("div",q,[(p(!0),y(N,null,A(e.value,(_,w)=>(p(),k(V,{key:w},{default:t(()=>[a(b,{class:"input-lng",placeholder:"请输入经度","allow-clear":"",modelValue:_.lng,"onUpdate:modelValue":m=>_.lng=m},null,8,["modelValue","onUpdate:modelValue"]),a(b,{class:"input-lat",placeholder:"请输入纬度","allow-clear":"",modelValue:_.lat,"onUpdate:modelValue":m=>_.lat=m},null,8,["modelValue","onUpdate:modelValue"]),w===e.value.length-1?(p(),k(g,{key:0,class:"coordinate-add",name:"add",size:"20px",onClick:d})):P("",!0),e.value.length>1?(p(),k(g,{key:1,class:"coordinate-delete",name:"delete",size:"20px",onClick:m=>v(w)},null,8,["onClick"])):P("",!0)]),_:2},1024))),128))]),a(V,{class:"manual-actions"},{default:t(()=>[a(r,{onClick:i},{default:t(()=>n[1]||(n[1]=[f("清除")])),_:1}),a(r,{type:"primary",onClick:o},{default:t(()=>n[2]||(n[2]=[f("确定")])),_:1})]),_:1})]),_:1}),a(h,{key:"2",title:"数据导入"},{default:t(()=>[a(B,{onSuccess:U}),a(r,{type:"text",onClick:D},{default:t(()=>n[3]||(n[3]=[f("(模板下载)")])),_:1})]),_:1})]),_:1})]),default:t(()=>[a(r,{class:"btn-batch",type:"primary"},{icon:t(()=>[a(g,{name:"upload",size:"15px"})]),default:t(()=>[n[0]||(n[0]=f(" 点位信息 "))]),_:1})]),_:1})])}}});const T=M(O,[["__scopeId","data-v-969c3cec"]]),j={class:"coordinate-point"},G=C({__name:"index",setup(z){const s=$({});let e={};E(async()=>{e=await F(),s.value=new e.Map("map-container",{zoom:11,center:[116.397428,39.90923],viewMode:"2D"})});const d=x([]),v=c=>{s.value.clearMap(),d.value=[],c.forEach(o=>{if(o.lng&&o.lat){const i=x({});i.value=new e.Marker({map:s.value,icon:new e.Icon({size:new e.Size(36,36),image:new URL("/vue3-admin/assets/point-marker-2b2f6918.png",self.location).href,imageSize:new e.Size(36,36),imageOffset:new e.Pixel(0,0)}),position:[o.lng,o.lat],offset:new e.Pixel(-18,-36)}),d.value.push(i.value)}}),s.value.setFitView()};return(c,o)=>{const i=l("a-space");return p(),y("div",j,[a(i,{class:"actions"},{default:t(()=>[a(T,{onDrawPoint:v})]),_:1}),o[0]||(o[0]=I("div",{id:"map-container",class:"map-container"},null,-1))])}}});const K=M(G,[["__scopeId","data-v-84cf2608"]]);export{K as default};
