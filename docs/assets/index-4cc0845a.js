import{g as L}from"./index-0545d4c3.js";import{d as C,h,r as n,o as c,c as b,a,w as t,f as M,F,i as N,l as x,m as P,b as v,_ as z,s as $,q as A,p as E,e as R}from"./index-0fcf21c4.js";const q={class:"batch-point"},O={class:"manual-list"},T=C({__name:"PointInfo",emits:["drawPoint"],setup(i,{emit:o}){const e=h([{lng:"",lat:""}]),p=()=>{e.value.push({lng:"",lat:""})},g=d=>{e.value.splice(d,1)},_=()=>{o("drawPoint",e.value)},l=()=>{e.value=[{lng:"",lat:""}],o("drawPoint",e.value)},s=()=>{location.href="/vue3-admin/file/batchPoint.xlsx"},S=d=>{o("drawPoint",d.map(u=>({address:u.address,lng:u.coordinate.split(",")[0],lat:u.coordinate.split(",")[1]})))};return(d,u)=>{const w=n("svg-icon"),r=n("a-button"),y=n("a-input"),V=n("a-space"),I=n("a-tab-pane"),D=n("file-upload"),U=n("a-tabs"),B=n("a-popover");return c(),b("div",q,[a(B,{title:"",trigger:"click",position:"bl",style:{width:"360px"}},{content:t(()=>[a(U,{"default-active-key":"1"},{default:t(()=>[a(I,{key:"1",title:"手动输入"},{default:t(()=>[M("div",O,[(c(!0),b(F,null,N(e.value,(m,k)=>(c(),x(V,{key:k},{default:t(()=>[a(y,{class:"input-lng",placeholder:"请输入经度","allow-clear":"",modelValue:m.lng,"onUpdate:modelValue":f=>m.lng=f},null,8,["modelValue","onUpdate:modelValue"]),a(y,{class:"input-lat",placeholder:"请输入纬度","allow-clear":"",modelValue:m.lat,"onUpdate:modelValue":f=>m.lat=f},null,8,["modelValue","onUpdate:modelValue"]),k===e.value.length-1?(c(),x(w,{key:0,class:"coordinate-add",name:"add",size:"20px",onClick:p})):P("",!0),e.value.length>1?(c(),x(w,{key:1,class:"coordinate-delete",name:"delete",size:"20px",onClick:f=>g(k)},null,8,["onClick"])):P("",!0)]),_:2},1024))),128))]),a(V,{class:"manual-actions"},{default:t(()=>[a(r,{onClick:l},{default:t(()=>[v("清除")]),_:1}),a(r,{type:"primary",onClick:_},{default:t(()=>[v("确定")]),_:1})]),_:1})]),_:1}),a(I,{key:"2",title:"数据导入"},{default:t(()=>[a(D,{onSuccess:S}),a(r,{type:"text",onClick:s},{default:t(()=>[v("(模板下载)")]),_:1})]),_:1})]),_:1})]),default:t(()=>[a(r,{class:"btn-batch",type:"primary"},{icon:t(()=>[a(w,{name:"upload",size:"15px"})]),default:t(()=>[v(" 点位信息 ")]),_:1})]),_:1})])}}});const j=z(T,[["__scopeId","data-v-23c5e052"]]),G=i=>(E("data-v-afe3443b"),i=i(),R(),i),H={class:"coordinate-point"},J=G(()=>M("div",{id:"map-container",class:"map-container"},null,-1)),K=C({__name:"index",setup(i){const o=$({});let e=h({});A(async()=>{e=await L(),o.value=new e.Map("map-container",{zoom:11,center:[116.397428,39.90923],viewMode:"2D"})});const p=h([]),g=_=>{o.value.clearMap(),p.value=[],_.forEach(l=>{if(l.lng&&l.lat){const s=h({});s.value=new e.Marker({map:o.value,icon:new e.Icon({size:new e.Size(36,36),image:new URL("/vue3-admin/assets/point-marker-2b2f6918.png",self.location).href,imageSize:new e.Size(36,36),imageOffset:new e.Pixel(0,0)}),position:[l.lng,l.lat],offset:new e.Pixel(-18,-36)}),p.value.push(s.value)}}),o.value.setFitView()};return(_,l)=>{const s=n("a-space");return c(),b("div",H,[a(s,{class:"actions"},{default:t(()=>[a(j,{onDrawPoint:g})]),_:1}),J])}}});const X=z(K,[["__scopeId","data-v-afe3443b"]]);export{X as default};
