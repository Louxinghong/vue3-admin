import{g as F}from"./index-9054b619.js";import{d as M,h as g,r as o,o as s,c as y,a,w as t,f as z,F as N,i as $,m as b,k as x,q as C,b as v,_ as S,s as A,v as E,p as R,e as q}from"./index-bee4eec1.js";const O={class:"batch-point"},T={class:"manual-list"},j=M({__name:"PointInfo",emits:["drawPoint"],setup(c,{emit:n}){let e=g([{lng:"",lat:""}]);const p=()=>{e.value.push({lng:"",lat:""})},h=d=>{e.value.splice(d,1)},_=()=>{n("drawPoint",e.value)},i=()=>{e.value=[{lng:"",lat:""}],n("drawPoint",e.value)},l=()=>{location.href="/mgmt-tool/file/batchPoint.xlsx"},D=d=>{n("drawPoint",d.map(u=>({address:u.address,lng:u.coordinate.split(",")[0],lat:u.coordinate.split(",")[1]})))};return(d,u)=>{const w=o("svg-icon"),r=o("a-button"),V=o("a-input"),I=o("a-space"),P=o("a-tab-pane"),U=o("file-upload"),B=o("a-tabs"),L=o("a-popover");return s(),y("div",O,[a(L,{title:"",trigger:"click",position:"bl",style:{width:"360px"}},{content:t(()=>[a(B,{"default-active-key":"1"},{default:t(()=>[a(P,{key:"1",title:"手动输入"},{default:t(()=>[z("div",T,[(s(!0),y(N,null,$(x(e),(m,k)=>(s(),b(I,{key:k},{default:t(()=>[a(V,{class:"input-lng",placeholder:"请输入经度","allow-clear":"",modelValue:m.lng,"onUpdate:modelValue":f=>m.lng=f},null,8,["modelValue","onUpdate:modelValue"]),a(V,{class:"input-lat",placeholder:"请输入纬度","allow-clear":"",modelValue:m.lat,"onUpdate:modelValue":f=>m.lat=f},null,8,["modelValue","onUpdate:modelValue"]),k===x(e).length-1?(s(),b(w,{key:0,class:"coordinate-add",name:"add",size:"20px",onClick:p})):C("",!0),x(e).length>1?(s(),b(w,{key:1,class:"coordinate-delete",name:"delete",size:"20px",onClick:f=>h(k)},null,8,["onClick"])):C("",!0)]),_:2},1024))),128))]),a(I,{class:"manual-actions"},{default:t(()=>[a(r,{onClick:i},{default:t(()=>[v("清除")]),_:1}),a(r,{type:"primary",onClick:_},{default:t(()=>[v("确定")]),_:1})]),_:1})]),_:1}),a(P,{key:"2",title:"数据导入"},{default:t(()=>[a(U,{onSuccess:D}),a(r,{type:"text",onClick:l},{default:t(()=>[v("(模板下载)")]),_:1})]),_:1})]),_:1})]),default:t(()=>[a(r,{class:"btn-batch",type:"primary"},{icon:t(()=>[a(w,{name:"upload",size:"15px"})]),default:t(()=>[v(" 点位信息 ")]),_:1})]),_:1})])}}});const G=S(j,[["__scopeId","data-v-a0abbda6"]]),H=c=>(R("data-v-67f8eca2"),c=c(),q(),c),J={class:"coordinate-point"},K=H(()=>z("div",{id:"map-container",class:"map-container"},null,-1)),Q=M({__name:"index",setup(c){let n=A({}),e=g({});E(async()=>{e=await F(),n.value=new e.Map("map-container",{zoom:11,center:[116.397428,39.90923],viewMode:"2D"})});let p=g([]);const h=_=>{n.value.clearMap(),p.value=[],_.forEach(i=>{let l=g({});l.value=new e.Marker({map:n.value,icon:new e.Icon({size:new e.Size(36,36),image:new URL("/mgmt-tool/assets/point-marker-2b2f6918.png",self.location).href,imageSize:new e.Size(36,36),imageOffset:new e.Pixel(0,0)}),position:[i.lng,i.lat],offset:new e.Pixel(-18,-36)}),p.value.push(l.value)}),n.value.setFitView()};return(_,i)=>{const l=o("a-space");return s(),y("div",J,[a(l,{class:"actions"},{default:t(()=>[a(G,{onDrawPoint:h})]),_:1}),K])}}});const Y=S(Q,[["__scopeId","data-v-67f8eca2"]]);export{Y as default};
