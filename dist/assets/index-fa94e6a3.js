import{d as se,e as v,r as m,o as g,c as k,a as r,w as i,u as p,v as w,k as y,f as b,F as S,h as R,i as z,t as C,x as F,y as ne,M as T,p as ue,m as re,_ as ie}from"./index-61a85ff3.js";let B=3.141592653589793*3e3/180,c=3.141592653589793,E=6378245,q=.006693421622965943;const A=(e,t)=>{let a=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return a+=(20*Math.sin(6*e*c)+20*Math.sin(2*e*c))*2/3,a+=(20*Math.sin(e*c)+40*Math.sin(e/3*c))*2/3,a+=(150*Math.sin(e/12*c)+300*Math.sin(e/30*c))*2/3,a},H=(e,t)=>{let a=-100+2*e+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return a+=(20*Math.sin(6*e*c)+20*Math.sin(2*e*c))*2/3,a+=(20*Math.sin(t*c)+40*Math.sin(t/3*c))*2/3,a+=(160*Math.sin(t/12*c)+320*Math.sin(t*c/30))*2/3,a},K=(e,t)=>e<72.004||e>137.8347||t<.8293||t>55.8271||!1,Y=(e,t)=>{if(e=Number(e),t=Number(t),K(e,t))return[e,t];{let a=H(e-105,t-35),s=A(e-105,t-35),_=t/180*c,n=Math.sin(_);n=1-q*n*n;let d=Math.sqrt(n);a=a*180/(E*(1-q)/(n*d)*c),s=s*180/(E/d*Math.cos(_)*c);let f=t+a;return[e+s,f]}},Q=(e,t)=>{const a=Y(e,t);return D(a[0],a[1])},G=(e,t)=>{let a=e-.0065,s=t-.006,_=Math.sqrt(a*a+s*s)-2e-5*Math.sin(s*B),n=Math.atan2(s,a)-3e-6*Math.cos(a*B),d=_*Math.cos(n),f=_*Math.sin(n);return[d,f]},ce=(e,t)=>{const a=G(e,t);return Z(a[0],a[1])},D=(e,t)=>{let a=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*B),s=Math.atan2(t,e)+3e-6*Math.cos(e*B),_=a*Math.cos(s)+.0065,n=a*Math.sin(s)+.006;return[_,n]},Z=(e,t)=>{if(K(e,t))return[e,t];{let a=H(e-105,t-35),s=A(e-105,t-35),_=t/180*c,n=Math.sin(_);n=1-q*n*n;let d=Math.sqrt(n);a=a*180/(E*(1-q)/(n*d)*c),s=s*180/(E/d*Math.cos(_)*c);let f=t+a,h=e+s;return[e*2-h,t*2-f]}},W=e=>(ue("data-v-4ba39d2e"),e=e(),re(),e),de={class:"data-conversion"},pe={class:"type-select"},_e={class:"coordinate-type-select"},me=W(()=>b("span",null,"坐标系 : ",-1)),ve={class:"initial-coordinate"},be=W(()=>b("span",null,"坐标 : ",-1)),he={class:"result-coordinate"},fe={class:"coordinate-type-select"},Me=W(()=>b("span",null,"目标坐标系 : ",-1)),ge={class:"batch-coordinate-result"},je=se({__name:"index",setup(e){let t=v([]);const a=u=>{t.value=u};let s=v("");const _=()=>{const u=F.json_to_sheet(JSON.parse(s.value)),l=F.book_new();F.book_append_sheet(l,u,"data"),ne(l,"测试表格.xlsx")};let n=v("single"),d=v(""),f=v([{label:"WGS84(国际通用)",value:"wgs84"},{label:"GCJ02(高德、QQ地图)",value:"gcj02"},{label:"BD09(百度地图)",value:"bd09"}]),h=v(""),j=v({wgs84:"",gcj02:"",bd09:""}),M=v(""),N=v(""),x=v(!1),U=v("");const X=()=>{if(!d.value){T.warning("请选择初始坐标系类型");return}if(n.value==="single"){if(!h.value){T.warning("请输入初始坐标");return}const u=h.value.split(",");switch(j.value[d.value]=h.value,d.value){case"wgs84":j.value.gcj02=Y(Number(u[0]),Number(u[1])).join(","),j.value.bd09=Q(Number(u[0]),Number(u[1])).join(",");break;case"gcj02":j.value.wgs84=Z(Number(u[0]),Number(u[1])).join(","),j.value.bd09=D(Number(u[0]),Number(u[1])).join(",");break;case"bd09":j.value.wgs84=ce(Number(u[0]),Number(u[1])).join(","),j.value.gcj02=G(Number(u[0]),Number(u[1])).join(",");break}}else{if(!M.value||!N.value){T.warning(M.value?"请选择目标坐标系类型":"请输入初始坐标");return}if(d.value===N.value){T.warning("经纬度初始类型与转换类型一致");return}x.value=!0;let u=[];switch(N.value){case"wgs84":u=M.value.split(`
`).map(l=>Q(Number(l.split(",")[0]),Number(l.split(",")[1])).join(","));break;case"gcj02":u=M.value.split(`
`).map(l=>D(Number(l.split(",")[0]),Number(l.split(",")[1])).join(","));break;case"bd09":u=M.value.split(`
`).map(l=>G(Number(l.split(",")[0]),Number(l.split(",")[1])).join(","));break}U.value=u.join(`
`),console.log(U.value)}};return(u,l)=>{const $=m("file-upload"),ee=m("json-viewer"),O=m("a-tab-pane"),P=m("a-textarea"),I=m("svg-icon"),J=m("a-button"),V=m("a-radio"),L=m("a-radio-group"),te=m("a-input"),ae=m("temlpate"),oe=m("a-modal"),le=m("a-tabs");return g(),k("div",de,[r(le,{"default-active-key":"1"},{default:i(()=>[r(O,{key:"1",title:"EXCEL转JSON"},{default:i(()=>[r($,{onSuccess:a}),r(ee,{class:"json-viewer",value:p(t),copyable:!0,"expand-depth":2,boxed:""},null,8,["value"])]),_:1}),r(O,{key:"2",title:"JSON转EXCEL"},{default:i(()=>[r(P,{class:"json-excel",placeholder:"请输入JSON内容",modelValue:p(s),"onUpdate:modelValue":l[0]||(l[0]=o=>w(s)?s.value=o:s=o)},null,8,["modelValue"]),r(J,{class:"btn-convert-json",type:"primary",onClick:_},{icon:i(()=>[r(I,{name:"convert",size:"15px"})]),default:i(()=>[y(" 转换EXCEL ")]),_:1})]),_:1}),r(O,{key:"3",title:"坐标转换"},{default:i(()=>[b("div",pe,[r(L,{modelValue:p(n),"onUpdate:modelValue":l[1]||(l[1]=o=>w(n)?n.value=o:n=o)},{default:i(()=>[r(V,{value:"single"},{default:i(()=>[y("单量")]),_:1}),r(V,{value:"batch"},{default:i(()=>[y("批量")]),_:1})]),_:1},8,["modelValue"])]),b("div",_e,[me,r(L,{modelValue:p(d),"onUpdate:modelValue":l[2]||(l[2]=o=>w(d)?d.value=o:d=o)},{default:i(()=>[(g(!0),k(S,null,R(p(f),o=>(g(),z(V,{value:o.value,key:o.value},{default:i(()=>[y(C(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),p(n)==="single"?(g(),z(ae,{key:0},{default:i(()=>[b("div",ve,[be,r(te,{class:"coordinate-value",placeholder:"请输入经纬度(逗号隔开)","allow-clear":"",modelValue:p(h),"onUpdate:modelValue":l[3]||(l[3]=o=>w(h)?h.value=o:h=o)},null,8,["modelValue"]),r(J,{type:"primary",onClick:X},{icon:i(()=>[r(I,{name:"convert",size:"15px"})]),default:i(()=>[y(" 转换 ")]),_:1})]),b("ul",he,[(g(!0),k(S,null,R(p(f),o=>(g(),k("li",{key:o.value,class:"item-result"},[b("span",null,C(o.label),1),b("span",null,C(p(j)[o.value]),1)]))),128))])]),_:1})):(g(),k(S,{key:1},[r(P,{class:"coordinate-list",placeholder:`请输入经纬度以换行隔开, 例如: 
121.222222,23.342122
121.222223,23.342123
121.222224,23.342124`,modelValue:p(M),"onUpdate:modelValue":l[4]||(l[4]=o=>w(M)?M.value=o:M=o)},null,8,["modelValue"]),b("div",fe,[Me,r(L,{modelValue:p(N),"onUpdate:modelValue":l[5]||(l[5]=o=>w(N)?N.value=o:N=o)},{default:i(()=>[(g(!0),k(S,null,R(p(f),o=>(g(),z(V,{value:o.value,key:o.value},{default:i(()=>[y(C(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),r(J,{type:"primary",onClick:X},{icon:i(()=>[r(I,{name:"convert",size:"15px"})]),default:i(()=>[y(" 转换 ")]),_:1}),r(oe,{visible:p(x),"onUpdate:visible":l[6]||(l[6]=o=>w(x)?x.value=o:x=o)},{title:i(()=>[y(" 批量转换经纬度结果 ")]),default:i(()=>[b("div",ge,C(p(U)),1)]),_:1},8,["visible"])],64))]),_:1})]),_:1})])}}});const Ne=ie(je,[["__scopeId","data-v-4ba39d2e"]]);export{Ne as default};
